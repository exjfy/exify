<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>exify.tech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

  <meta name="description" content=""/>
  <meta name="keywords" content="pause"/>
  <meta name="author" content=""/>
  <meta property="og:type" content="site"/>
  <meta property="og:title" content="Zupa.lol"/>
  <meta property="og:description" content=""/>
  <meta property="og:url" content="index.html"/>
  <meta property="og:image" content=""/>

  <link rel="shortcut icon" href="#" type="image/x-icon" />
  <link rel="stylesheet" href="assets/stylesheets/stylesheet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" />

  <!-- tiny CSS for the overlay fade -->
  <style>
    #enter-overlay {
      position: fixed; inset: 0; background: #000; z-index: 9999;
      display: flex; align-items: center; justify-content: center;
      transition: opacity 0.6s ease;
      color: #fff; font-family: monospace; letter-spacing: .08em;
      cursor: pointer;
    }
    #enter-overlay.fade-out { opacity: 0; pointer-events: none; }
    #enter-button { padding: 14px 22px; border: 1px solid #fff; border-radius: 8px; }
  </style>
</head>

<body>
  <!-- click-to-enter cover -->
  <div id="enter-overlay">
    <div id="enter-button">click to enter</div>
  </div>

  <!-- your app bootstrap (keep if you use it elsewhere) -->
  <script src="assets/javascript/app.js"></script>

  <div id="main">
    <table class="box">
      <tbody>
        <tr><td><span id="line1" style="white-space: pre;"></span></td></tr>
        <tr><td><span id="line2" style="white-space: pre;"></span></td></tr>
        <tr><td><span id="line3" style="white-space: pre;"></span></td></tr>
        <tr><td><span id="line4" style="white-space: pre;"></span></td></tr>
      </tbody>
    </table>
  </div>

  <div class="container" style="display: none;">
    <h1 class="brand-header">
      <a href="https://onlyfans.com/exifyandlost" target="_blank">exify.tech</a>
    </h1>
    <p><span id="brand"></span></p>
  </div>

  <div class="marquee-container" style="visibility: hidden;">
    <pre>|<div id="marquee"></div>|</pre>
  </div>

  <!-- background media (hidden until the gate opens) -->
  <div class="background" style="display: none;">
    <div id="pattern"></div>

    <!-- If you actually have a separate audio track, set the src here -->
    <audio id="audio" loop>
      <source src="" type="audio/mp4" />
    </audio>

    <video id="background" loop muted playsinline>
      <source src="https://cdn.discordapp.com/attachments/1116493465136681013/1432810654942625994/EsDeeKid__Rico_Ace_-_Phantom_-_EsDeeKid_1080p_h264.mp4?ex=69026868&is=690116e8&hm=eee53d1e0b3ba72acd3a8e2f319b680c994f4f187e661a4089bc6bbefe562f34&" />
    </video>
  </div>

  <div class="top-right">
    <i><a class="skip" style="cursor:pointer;">skip intro</a></i>
  </div>

  <div class="footer">
    <i><a href="https://onlyfans.com/exifyandlost" target="_blank">my discord</a></i>
  </div>

  <!-- libs -->
  <script src="assets/javascript/lib/jquery-3.1.1.min.js"></script>
  <script src="assets/javascript/lib/jquery.marquee.min.js"></script>
  <script src="assets/javascript/lib/jquery.cookie.min.js"></script>
  <script src="assets/javascript/lib/typed.min.js"></script>
  <script src="assets/javascript/portfolio.js"></script>

  <!-- 13s audio gate controller (drop-in) -->
  <script>
  'use strict';

  (function() {
    const DELAY_MS = 13000;   // 13s delay before allowing any audio
    const FADE_OUT_MS = 600;  // overlay fade animation duration
    const START_VIDEO_MUTED_DURING_INTRO = false; // set true to preroll video silently

    // keep your app namespace safe
    window.app = window.app || {};

    let entered = false;
    let delayTimer = null;

    document.addEventListener('DOMContentLoaded', () => {
      const overlay = document.getElementById('enter-overlay');
      const button  = document.getElementById('enter-button');
      const skipBtn = document.querySelector('.skip');
      const bgWrap  = document.querySelector('.background');

      const video = document.getElementById('background');
      const audio = document.getElementById('audio');

      // expose for your other scripts
      app.videoElement = video;
      app.audioElement = audio;
      app.shouldIgnoreVideo = !!app.shouldIgnoreVideo;

      // harden media upfront
      if (video) {
        try {
          video.muted = true;        // absolutely no sound until we say so
          video.volume = 1.0;
          video.pause();
          video.currentTime = 0;
        } catch(e){}
      }
      if (audio) {
        try {
          audio.muted = true;
          audio.volume = 0.5;        // matches your previous setting
          audio.pause();
          audio.currentTime = 0;
        } catch(e){}
      }

      function showBackgroundNow() {
        if (bgWrap && bgWrap.style.display === 'none') {
          bgWrap.style.display = 'block';
        }
      }

      async function startMediaForReal() {
        // reveal visuals at the same moment audio is allowed
        showBackgroundNow();

        if (video && !app.shouldIgnoreVideo) {
          try {
            if (!START_VIDEO_MUTED_DURING_INTRO) {
              try { video.currentTime = 0; } catch(e){}
            }
            video.muted = false; // enable the video's own audio track if present
            await video.play().catch(()=>{});
          } catch(e){}
        }

        if (audio && audio.querySelector('source')?.getAttribute('src')) {
          try {
            audio.currentTime = 0;
            audio.muted = false;
            await audio.play().catch(()=>{});
          } catch(e){}
        }
      }

      function cleanOverlay() {
        if (!overlay) return;
        overlay.classList && overlay.classList.add('fade-out');
        setTimeout(() => { try { overlay.remove(); } catch(e){} }, FADE_OUT_MS);
      }

      async function onEnterGesture() {
        if (entered) return;
        entered = true;

        cleanOverlay();

        // keep visuals hidden under intro unless you want silent preroll
        if (START_VIDEO_MUTED_DURING_INTRO) {
          showBackgroundNow();
          if (video) {
            try { video.muted = true; await video.play().catch(()=>{}); } catch(e){}
          }
        }

        // guarantee silence
        if (audio) { try { audio.muted = true; audio.pause(); } catch(e){} }
        if (video) { try { video.muted = true; } catch(e){} }

        // open the gate after 13s
        delayTimer = setTimeout(startMediaForReal, DELAY_MS);
      }

      // click handlers
      if (button && overlay) {
        overlay.addEventListener('click', onEnterGesture);
        button.addEventListener('click', onEnterGesture);
      }

      if (skipBtn) {
        skipBtn.addEventListener('click', (e) => {
          e.preventDefault();
          if (!entered) {
            // act like they entered, but skip the wait
            entered = true;
            cleanOverlay();
          }
          if (delayTimer) { clearTimeout(delayTimer); delayTimer = null; }
          startMediaForReal();
        });
      }
    });
  })();
  </script>
</body>
</html>
